"use client";
import { jsx, jsxs } from "react/jsx-runtime";
import { c as _c } from "react-compiler-runtime";
import { addBasePath } from "next/dist/client/add-base-path";
import { usePathname } from "next/navigation";
import { Select } from "nextra/components";
import { GlobeIcon } from "nextra/icons";
import { useThemeConfig } from "../stores";
const ONE_YEAR = 365 * 24 * 60 * 60 * 1e3;
const LocaleSwitch = (t0) => {
  const $ = _c(20);
  const {
    lite,
    className
  } = t0;
  const {
    i18n
  } = useThemeConfig();
  const pathname = usePathname();
  if (!i18n.length) {
    return null;
  }
  let t1;
  if ($[0] !== pathname) {
    t1 = pathname.split("/", 2);
    $[0] = pathname;
    $[1] = t1;
  } else {
    t1 = $[1];
  }
  const [, locale] = t1;
  let t2;
  if ($[2] !== locale || $[3] !== pathname) {
    t2 = (lang) => {
      const date = new Date(Date.now() + ONE_YEAR);
      document.cookie = `NEXT_LOCALE=${lang}; expires=${date.toUTCString()}; path=/`;
      location.href = addBasePath(pathname.replace(`/${locale}`, `/${lang}`));
    };
    $[2] = locale;
    $[3] = pathname;
    $[4] = t2;
  } else {
    t2 = $[4];
  }
  let t3;
  if ($[5] === Symbol.for("react.memo_cache_sentinel")) {
    t3 = /* @__PURE__ */ jsx(GlobeIcon, { height: "12" });
    $[5] = t3;
  } else {
    t3 = $[5];
  }
  let t4;
  if ($[6] !== i18n || $[7] !== lite || $[8] !== locale) {
    t4 = !lite && i18n.find((l) => locale === l.locale)?.name;
    $[6] = i18n;
    $[7] = lite;
    $[8] = locale;
    $[9] = t4;
  } else {
    t4 = $[9];
  }
  let t5;
  if ($[10] !== t4) {
    t5 = /* @__PURE__ */ jsxs("span", { className: "x:flex x:items-center x:gap-2", children: [
      t3,
      t4
    ] });
    $[10] = t4;
    $[11] = t5;
  } else {
    t5 = $[11];
  }
  let t6;
  if ($[12] !== i18n) {
    t6 = i18n.map(_temp);
    $[12] = i18n;
    $[13] = t6;
  } else {
    t6 = $[13];
  }
  let t7;
  if ($[14] !== className || $[15] !== locale || $[16] !== t2 || $[17] !== t5 || $[18] !== t6) {
    t7 = /* @__PURE__ */ jsx(Select, { title: "Change language", className, onChange: t2, value: locale, selectedOption: t5, options: t6 });
    $[14] = className;
    $[15] = locale;
    $[16] = t2;
    $[17] = t5;
    $[18] = t6;
    $[19] = t7;
  } else {
    t7 = $[19];
  }
  return t7;
};
function _temp(l_0) {
  return {
    id: l_0.locale,
    name: l_0.name
  };
}
export {
  LocaleSwitch
};
